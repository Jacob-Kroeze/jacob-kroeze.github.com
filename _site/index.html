<!doctype html>  
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]--> 
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]--> 
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]--> 
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]--> 
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]--> 
<head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
 
  <title>YOUR NAME</title> 
  <meta name="author" content="YOUR_NAME" />
  <link href='http://fonts.googleapis.com/css?family=Lato:light,regular,bold' rel='stylesheet' type='text/css'>
  <link href="/css/reset.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link href="/css/main.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link rel="alternate" type="application/rss+xml" href="/atom.xml" title="RSS feed">
</head> 
 
    <body> 
        <div id="header">
            <div class="inner">
                <ul>
                    <li><a href="http://www.twitter.com/jacobkroeze">Follow Me</a></li>
                    <li><a href="/about/">About Me</a></li>
                </ul>
                <h1><a href="/">Jacob Kroeze</a></h1>
                <h2>Web development, design, responsible Data use, and the philosophy of it all</h2>
            </div>
        </div>
                
        <div id="content">
            <div class="inner">
                
    <div class="post">
        <h3><a href="/2011/12/08/set-up-managing-news-on-aws-ec2/">Setting up Managing News' Drupal Profile on Amazon EC2</a></h3>
      
        <div class="body">
            <p>Managing News is a clever implementation of Drupal. Amazon Web Services (AWS) is a clever hosting platform.</p>

<p>Here are the steps that worked for me to set up a test environment for Managing News on AWS EC2</p>

<ol>
<li><p>Set up an AWS account. <a href="http://aws.amazon.com/ec2/">their sales pitch, even though its next to free tot try</a></p>

<ul>
<li>Sign in and click the EC2 tab in the AWS console</li>
<li>Click "AMIs" in the left toolbar</li>
<li>Select "Amazon Images" from the drop down and search for Drupal. (I chose the 64bit Drupal 7.X version)</li>
<li>Set up the machine to your liking; I use all of the default and the quickstart firewall / port setting.</li>
<li>Be sure to save your *.pem key in a safe place. Linux machines default to ~/.ssh</li>
<li>Start it up (this should happen as the last step in AWS' step-wise guide.</li>
</ul>
</li>
<li><p>Login to your new machine</p>

<ul>
<li>Click on "Instances" in the AWS toolbar.</li>
<li>Right click on the instance we just created.</li>
<li>Connect! and follow the directions provided by AWS.</li>
<li>Test out the default Drupal installation already on the machine by going to its public url (find this in the instance information or right-click connect)</li>
</ul>
</li>
<li><p>Set up your new Managing News Profile</p>

<ul>
<li>The default installation of Drupal is at /var/www/html check it out and troubleshoot if you couldn't connect to the public url. Try
<pre><code>
!bash
sudo su
/etc/init.d/httpd start
</code></pre></li>
<li>Once you've tested that drupal is up and running, move the installation out of the way.
<pre><code>
!bash
sudo su
mkdir /var/www/drupal7
mv /var/www/html/* /var/www/drupal7
</code></pre></li>
<li>Download Managing News
<pre><code>
!bash
mkdir managing_news
cd ~/managing_news
curl -C - -O http://www.managingnews.com/files/managingnews-1.2.zip
</code></pre></li>
<li>Install Managing news, or following these <a href="http://drupal.org/documentation/install/developers">directions</a> from <a href="http://www.drupal.org">drupal.org</a>
<pre><code>
!bash
unzip managingnews-1.2.zip
sudo su
mv managingnews-1.2/* /var/www/html/
</code></pre>

<ul>
<li>Go to your machines public url</li>
<li>Select "Managing News" as the installation profile.</li>
<li>Follow the directions to  create a settings.php file. Here's mine:
<pre><code>
!bash
sudo cd /var/www/html/sites/default
sudo cp default.settings.php settings.php
</code></pre></li>
</ul>
</li>
<li>Set up MySql server

<ul>
<li>unfortunately, the mysql server seems to be a bust on the AMI. Let's reinstall it with help from this <a href="http://getablogger.blogspot.com/2009/05/how-to-install-mysql-in-centos-53-from.html">tutorial</a>
<pre><code>  <br/>
!bash
sudo yum remove mysql-server
sudo yum remove mysql
sudo yum install mysql-server
sudo yum install mysql-devel
sudo yum install php-mysql
</code></pre></li>
</ul>
</li>
<li><p>Set up phpMyAdmin, a useful Graphical Interface to help with the SQL illiterate
<pre><code>
  sudo yum install phpmyadmin
  sudo vim /etc/httpd/conf.d/phpMyAdmin.conf
  #add this line with your own ip address in order to tell apache to let you through to phpMyAdmin
  Allow from your.ip.address.here
  # you should really set up SSL for phpMyAdmin, but that's another tutorial.
</code></pre></p>

<ul>
<li>Go to http://publicDNS.com/phpmyadmin. Add a user and database for Managing news. I called mine "mn_test"</li>
</ul>
</li>
<li><p>Fix the PHP strict timezone warnings <a href="http://drupal.org/node/325827">(issue ticket)</a> <a href="http://groups.drupal.org/node/17970#comment-179313">(solution)</a>
<pre><code>    <br/>
   #!bash
   sudo vim /var/www/html/sites/default/settings.php
   #add the following line under php settings
   ini_set('date.timezone', date_default_timezone_get());
</code></pre></p></li>
<li>Finally, enable Clean Urls to get rid of the "q?=" etc in your urls. <a href="http://drupal.org/node/15365">Help</a>
<pre><code>   <br/>
  #!bash
  sudo vim /etc/httpd/conf/mn.conf
  #paste this
<Directory /var/www/html>
   RewriteEngine on
   RewriteBase /
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
</Directory>
</code></pre></li>
</ul>
</li>
</ol>


<p>That's all. Go, now, save the world.</p>

        </div>
        
        <div class="meta">
            Posted on <a href="/2011/12/08/set-up-managing-news-on-aws-ec2/">08 Dec 2011</a>
        </div>
    </div>


            </div>
        </div>
        
        <div id="footer" class="clearfix">
            <div class="inner">
                <div class="archives">
                    <h3>Archives</h3>
            
                    <table>
                    
                        <tr>
                            <td class="date">08 Dec 2011</td>
                            <td><a href="/2011/12/08/set-up-managing-news-on-aws-ec2/">Setting up Managing News' Drupal Profile on Amazon EC2</a></td>
                        </tr>
                    
                    </table>
                </div>
                <div class="about">
                    <h3><a href="/about/">About Me</a></h3>
                    
                    <a href="/about/"><img src="/images/profile.png" alt="Jacob" /></a>
                    <div>
                        I want to help your organization organize... <a href="/about/">Read more</a>
                    </div>
                </div>
            </div>
        </div>
        
    </body> 
</html>
